{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Website</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- mediapipe libs -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js"
    crossorigin="anonymous"></script>
  <!-- mediapipe -->
  <link href="{% static 'https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900|Oswald:400,700"
    rel="stylesheet' %} " />
  <link href="{% static 'https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet' %} "
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap-switch-button@1.1.0/css/bootstrap-switch-button.min.css"
    rel="stylesheet" />
  <link rel="stylesheet" href=" {% static 'fonts/icomoon/style.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/all.min.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/bootstrap.min.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/bootstrap-rtl.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/magnific-popup.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/jquery-ui.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/owl.carousel.min.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/owl.theme.default.min.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/bootstrap-datepicker.css' %} " />
  <link rel="stylesheet" href=" {% static 'fonts/flaticon/font/flaticon.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/aos.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/rome.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/fancybox.min.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/style.css' %} " />
  <link rel="stylesheet" href=" {% static 'css/style2.css' %} " />
</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="200">

  <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01"
      aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
      <a class="navbar-brand" href="#home">Eye +</a>
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0 nav-pills nav-fill">
        <li class="nav-item ">
          <a class="nav-link active" href="#home">HOME <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#controls">CONTROLS </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#videos">Videos </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#bio">BIOGRAPHY </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact">CONTACT </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/login/">LOGIN </a>
        </li>
      </ul>
    </div>
  </nav>


  <!-- #sections -->
  <div class="d-flex justify-content-center" id="home">
    <main class="main-content">
      <div class="container-fluid">

        <section class="site-section stream">
          <div class="row m-3">
            <div class="col-md-8 themed-grid-col">
              <h2 class="heading text-uppercase text-dark">Streaming</h2>
              <article class="col-12 my-3 py-3 aos-init stream aos-animate" data-aos="fade-up">
                <figure>
                  <!-- <a href="https://www.youtube.com/embed/w36ZmkgkPww" class="d-block photo-item"
                    data-fancybox="gallery"> -->
                    <img src="/static/images/bg.jpg" id="video-stream" alt="Image" class="img-fluid">
                    <div class="photo-text-more">
                    </div>
                  </a>
                </figure>
              </article>
            </div>

            <div class="offset-1 col-md-3 themed-grid-col">
              <div class="pb-3">
                <article class="col-12 my-3 py-3 aos-init stream aos-animate" data-aos="fade-up">
                  <h3 class="font-weight-light text-dark text-center mb-3">
                    Last Videos
                  </h3>

                  {% for file in last %}

                  <figure class="mb-4">
                    <a href={{ file }} class="d-block photo-item" data-fancybox="gallery">
                      <img src="{% static 'images/bg.jpg' %} " alt="Image" class="img-fluid" />
                      <div class="photo-text-more">
                      </div>
                    </a>
                    </a>
                  </figure>
                  {% endfor %}

                </article>
              </div>
            </div>
          </div>
        </section>

        <hr>
        <!-- Control  -->
        <section class="site-section controls" id="controls">
          <h2 class="heading text-uppercase text-dark">Controls</h2>
          <div class="row row-cols-4 m-5">

            <div class="col-12 col-md-6 col-lg-3 my-2">
              <button type="button" id = "unlock" class="btn btn-toggle p-3 w-100 btn-danger"><i class="pr-1 fas fa-unlock pr-2"
                  aria-hidden="true" ></i>Un/Locked</button>
            </div>
            <div class="col-12 col-md-6 col-lg-3 my-2">
              <button type="button" id = "object" class="btn btn-toggle p-3 w-100 btn-success"><i class="pr-1 fa-solid fa-images"
                  aria-hidden="true" ></i>Object Detection</button>
            </div>
            <div class="col-12 col-md-6 col-lg-3 my-2">
              <button type="button" id = "test1" class="btn btn-toggle p-3 w-100 btn-danger"><i class="pr-1 fas fa-unlock pr-2"
                  aria-hidden="true" ></i>Un/Locked</button>
            </div>
            <div class="col-12 col-md-6 col-lg-3 my-2">
              <button type="button" id = "test2" class="btn btn-toggle p-3 w-100 btn-success"><i class="pr-1 fas fa-unlock pr-2"
                  aria-hidden="true" ></i>Un/Locked</button>
            </div>
          </div>
        </section>

        <hr>

        <section class="site-section row align-items-stretch photos" id="videos">
          <div class="col-12">
            <h2 class="heading text-uppercase text-dark">Recording Videos</h2>

            <div class="row align-items-stretch m-3">

              {% for file in files %}
              {% for Vname,Vpath in file.items %}
              <article class="col-12 col-md-6 col-lg-4" data-aos="fade-up">
                <figure>
                  <a href={{ Vpath }} class="d-block photo-item" data-fancybox="gallery">
                    <img src="{% static 'images/bg.jpg' %} " alt="Image" class="img-fluid" />
                    <div class="photo-text-more">
                      <span class="icon icon-search"></span>
                    </div>
                  </a>
                </figure>
                <h2 class="font-weight-light text-dark text-center">
                  {{ Vname }}
                </h2>
              </article>
              {% endfor %}
              {% endfor %}

            </div>
          </div>
        </section>

        <hr>

        <!-- #section-bio -->
        <section class="site-section bg-light" id="bio">
          <div class="row justify-content-center">
            <div class="col-md-8">
              <h2 class="heading text-uppercase text-dark">Biography</h2>
              <div data-aos="fade-up" data-aos-delay="100">
                <h2 class="text-dark">Hi I'm .........</h2>
                <p>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                  Dolor aperiam a velit. Harum eligendi quod reiciendis quos
                  ullam libero est dolor,
                  <a href="#">corporis dolores assumenda</a>, delectus,
                  quidem voluptatibus dolorum temporibus enim!
                </p>
                <p>
                  Neque facilis soluta, accusantium quaerat, adipisci porro
                  animi, hic fugiat id vero placeat dolorem accusamus
                  sapiente odio consequatur debitis beatae eius quos alias.
                  In recusandae magnam quis ipsum, asperiores mollitia!
                </p>
                <h3 class="text-dark mt-5">Lorem ipsum dolor sit amet</h3>
                <p>
                  Tempore repudiandae <a href="#">rerum numquam iste</a>,
                  quibusdam omnis voluptates quaerat veniam neque odit sit
                  vel dolores. Optio eveniet ex laborum similique inventore
                  sapiente tenetur. Ipsam aliquam esse voluptate qui
                  reiciendis. Harum.
                </p>
                <div class="d-block d-md-flex mt-5">
                  <div class="mr-md-auto mr-2">
                    <ul class="ul-check list-unstyled success">
                      <li>Lorem ipsum dolor sit amet</li>
                      <li>Lorem ipsum dolor sit amet</li>
                      <li>Ipsam aliquam esse</li>
                    </ul>
                  </div>
                  <div class="mr-md-auto">
                    <ul class="ul-check list-unstyled success">
                      <li>Optio eveniet ex laborum</li>
                      <li>Inventore sapiente tenetur</li>
                      <li>Ipsam aliquam esse</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <hr>

        <section class="site-section bg-light" id="contact">
          <div class="row justify-content-center">
            <div class="col-md-8">
              <h2 class="text-dark mb-5 heading">Contact</h2>

              <form action="#">
                <div class="row form-group">
                  <div class="col-md-6 mb-3 mb-md-0">
                    <label class="text-dark" for="fname">First Name</label>
                    <input type="text" id="fname" class="form-control" />
                  </div>
                  <div class="col-md-6">
                    <label class="text-dark" for="lname">Last Name</label>
                    <input type="text" id="lname" class="form-control" />
                  </div>
                </div>

                <div class="row form-group">
                  <div class="col-md-12">
                    <label class="text-dark" for="email">Email</label>
                    <input type="email" id="email" class="form-control" />
                  </div>
                </div>

                <div class="row form-group">
                  <div class="col-md-12">
                    <label class="text-dark" for="subject">Subject</label>
                    <input type="subject" id="subject" class="form-control" />
                  </div>
                </div>

                <div class="row form-group mb-5">
                  <div class="col-md-12">
                    <label class="text-dark" for="message">Message</label>
                    <textarea name="message" id="message" cols="30" rows="7" class="form-control"
                      placeholder="Write your notes or questions here..."></textarea>
                  </div>
                </div>

                <div class="row form-group">
                  <div class="col-md-12">
                    <input type="submit" value="Send Message" class="btn btn-primary btn-md text-light" />
                  </div>
                </div>
              </form>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
  <footer>
    <div class="row justify-content-center footer">
      <div class="col-md-12 text-center pt-3">
        <p>
          Copyright &copy; All rights reserved | made with
          <i class="icon-heart text-danger" aria-hidden="true"></i> by
          <a href="https://www.linkedin.com/in/saleh-mahmoud-7b784a189/" target="_blank">Saleh Mahmoud</a>
        </p>
      </div>
    </div>
  </footer>

  <script src=" {% static 'js/jquery-3.3.1.min.js' %} "></script>
  <script src=" {% static 'js/jquery-migrate-3.0.1.min.js' %} "></script>
  <script src=" {% static 'js/jquery.easing.1.3.js' %} "></script>
  <script src=" {% static 'js/jquery-ui.js' %} "></script>
  <script src=" {% static 'js/popper.min.js' %} "></script>
  <script src=" {% static 'js/bootstrap.min.js' %} "></script>
  <script src=" {% static 'js/owl.carousel.min.js' %} "></script>
  <script src=" {% static 'js/jquery.stellar.min.js' %} "></script>
  <script src=" {% static 'js/jquery.countdown.min.js' %} "></script>
  <script src=" {% static 'js/jquery.magnific-popup.min.js' %} "></script>
  <script src=" {% static 'js/bootstrap-datepicker.min.js' %} "></script>
  <script src=" {% static 'js/rome.js' %} "></script>
  <script src=" {% static 'js/aos.js' %} "></script>
  <script
    src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap-switch-button@1.1.0/dist/bootstrap-switch-button.min.js"></script>
  <script src=" {% static 'js/jquery.fancybox.min.js' %} "></script>
  <script src=" {% static 'js/main.js' %} "></script>
  <script src=" {% static 'js/master.js' %} "></script>

  <script>
    const socket = new WebSocket(`ws://${window.location.host}/ws/video/feed/`);
    let video_feed = document.querySelector('#video-stream');
    socket.onmessage = function (e) {
      let blobout = e.data
      let url = URL.createObjectURL(blobout)
      video_feed.src = url
    }
  </script>
</body>

</html>